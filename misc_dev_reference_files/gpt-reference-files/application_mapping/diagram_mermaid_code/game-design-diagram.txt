graph TD

    User[User Input] --> MasterAI[Master AI]
    MasterAI --> CommandOutput[Command Output]

    CommandOutput --> Combat[1. Initiate Combat]
    Combat --> opo_initiate_combat[Determine Adversaries]
    Combat --> ali_call_for_help[Call Allies]
    Combat --> ski_execute_skill[Determine Combat Skills]
    Combat --> cam_update_event1[Log Combat Event]

    CommandOutput --> Dialogue[2. Engage in Dialogue]
    Dialogue --> npc_initiate_dialog[Begin Dialogue with NPC]
    Dialogue --> ali_retrieve_info1[Fetch Ally Info]
    Dialogue --> cam_update_event2[Log Dialogue Event]

    CommandOutput --> Rest[3. Rest and Recuperation]
    Rest --> item_retrieve_info1[Check Healing Items]
    Rest --> cam_update_event3[Log Rest Event]

    CommandOutput --> Exploration[4. Exploration and Lore Discovery]
    Exploration --> lor_retrieve_info1[Fetch Lore Details]
    Exploration --> cam_update_event4[Log Exploration Event]
    Exploration --> set_initiate_scenario1[Change Game Setting]

    CommandOutput --> SkillUpdate[5. Skill and Achievement Update]
    SkillUpdate --> ski_learn_new[Acquire/Improve Skill]
    SkillUpdate --> ach_update[Update Achievements]
    SkillUpdate --> cam_update_event5[Log Skill/Achievement Update]

    CommandOutput --> Inventory[6. Inventory Management]
    Inventory --> item_add_to_inventory[Acquire New Item]
    Inventory --> item_remove_from_inventory[Use/Discard Item]
    Inventory --> item_retrieve_info2[Check Item Details]

    CommandOutput --> Tests[7. Initiate Tests and Checks]
    Tests --> tes_execute_check[Conduct Test/Check]
    Tests --> cam_update_event6[Log Test Outcome]
    Tests --> ski_execute_skill1[Use Skill for Test Outcome]

    CommandOutput --> Travel[8. Travel and Movement]
    Travel --> set_initiate_scenario2[Transition Game Setting]
    Travel --> cam_update_event7[Log Travel Event]
    Travel --> opo_initiate_combat1[Trigger Combat During Travel]
    Travel --> item_retrieve_info3[Use Travel-Related Items]

    CommandOutput --> MusicChange[9. Music and Ambiance Change]
    MusicChange --> music_change_theme[Change Music/Ambiance]
    MusicChange --> cam_update_event8[Log Music/Ambiance Change]

    CommandOutput --> ManageAllies[10. Manage Allies]
    ManageAllies --> ali_call_for_help1[Summon Ally]
    ManageAllies --> ali_retrieve_info2[Get Ally Info]
    ManageAllies --> cam_update_event9[Log Ally Event]

    CommandOutput --> ManageOpponents[11. Manage Opponents]
    ManageOpponents --> opo_retrieve_info1[Get Opponent Info]
    ManageOpponents --> cam_update_event10[Log Opponent Interaction]

    CommandOutput --> LoreStudy[12. Lore Study and Research]
    LoreStudy --> lor_retrieve_info2[Fetch Lore/Backstory]
    LoreStudy --> cam_update_event11[Log Research/Discovery]

    CommandOutput --> SaveLoad[13. Save and Load Game States]
    SaveLoad --> sav_create_checkpoint[Create Save Point]
    SaveLoad --> cam_update_event12[Log Save Event]

    CommandOutput --> Environment[14. Environmental Interactions]
    Environment --> env_change_weather[Change Weather]
    Environment --> cam_update_event13[Log Environmental Change]

    CommandOutput --> Puzzles[15. Puzzle Solving and Challenges]
    Puzzles --> puz_introduce_challenge[Present Puzzle/Challenge]
    Puzzles --> cam_update_event14[Log Puzzle Introduction/Completion]

    CommandOutput --> Trading[16. Trading Interaction]
    Trading --> tra_initiate_trade[Begin Trade with NPC]
    Trading --> item_retrieve_info4[Check Items for Trade]
    Trading --> cam_update_event15[Log Trade Event]

    CommandOutput --> Magic[17. Magic and Spellcasting]
    Magic --> mag_cast_spell[Cast Spell]
    Magic --> opo_retrieve_info2[Effect of Spell on Opponents]
    Magic --> cam_update_event16[Log Spellcasting Event]

